!function(e){function t(){jQuery("#results-list").html('<img class="ajaxloader" src="/wp-content/themes/opentextbook/dist/images/ajax-loader.gif">'),null!=s&&(s.abort(),s=null);var e=jQuery.param(o);i=jQuery("#discovery-keyword-term").val(),e=e+"&keyword="+i,s=jQuery.getJSON("/10_items.json",function(e){jQuery("#results-list").empty(),jQuery.each(e,function(e,t){var s="",o=[];jQuery.each(t.metadata,function(e,t){"dc.contributor.author"===t.key&&(s=t.value),"dc.subject"===t.key&&o.push(t.value)});var i=o.join(",");jQuery("#results-list").append('<div class="result-item col-lg-3 col-md-4"><span id="'+t.uuid+'" class="textbook"><span id="'+t.uuid+'-cover"class="textbook-cover"></span><p class="textbook-header">'+i+'</p><h4 class="textbook-title">'+t.name+'</h4><p class="textbook-authors">'+s+'</p><p class="textbook-footer">&gt;&nbsp;&nbsp;<a href="preview/?id='+t.uuid+'">About this book</a></p>'),jQuery("#"+t.uuid+"-cover").css("backgroundImage","url('/wp-content/themes/opentextbook/dist/images/ryerson_stock_bg.jpg')")}),jQuery("#results-list").append('<div class="result-item create-new-item col-lg-3 col-md-4"><span id="new-textbook" class="textbook"><span class="textbook-cover"></span><p class="textbook-header">&nbsp;</p><h4 class="textbook-title">Create your own textbook</h4><p class="textbook-authors">Add a text to this (or any) topic.</p><p class="textbook-footer"><input type="button" value="Start Authoring" class="btn btn-secondary"></p></span></div>')})}var s=null,o={subject:"",type:"",created:"3months",peerreview:"reviewed",level:"postsecondary",language:"",use:"",adoption:""},i="",c=5;jQuery("#discovery-ui-subject").children("li").hide(),jQuery("#discovery-ui-subject > li").slice(0,c).show(),e("#discovery-moresubjects").click(function(){e("#discovery-ui-subject > li:hidden").slice(0,c).show(),0===e("#discovery-ui-subject > li:hidden").length&&e("#discovery-moresubjects").hide()}),e.each(o,function(s,i){e("#discovery-ui-"+s).children("li").each(function(){e(this).attr("data-term")===i&&e(this).addClass("selectedfacet")}),e("#discovery-ui-"+s).children("li").click(function(){o.v=e(this).attr("data-term"),e("#discovery-ui-"+s).children("li").removeClass("selectedfacet"),e(this).addClass("selectedfacet"),t(o)})}),e("#discovery-keyword-term").keypress(function(e){13===e.which&&t(o)})}(jQuery);